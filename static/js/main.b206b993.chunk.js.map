{"version":3,"sources":["asset/icon/keyboard.svg","asset/Bus.mp3","asset/icon/logo.svg","asset/icon/goBack.svg","asset/icon/map.svg","components/Header/index.jsx","components/Nav/index.jsx","utils/keyboard_config.js","utils/localStorage.js","pages/Layout/index.jsx","webpack:///./src/asset/icon/GPS.svg?d036","asset/icon/search.svg","webpack:///./src/asset/icon/like.svg?4d71","pages/Index/index.jsx","pages/CityBus/index.jsx","components/DataList/RouteList.jsx","components/DataList/StationList.jsx","components/DataList/index.jsx","pages/Favorites/index.jsx","components/Loading/index.jsx","pages/Nearby/NearbyStops.jsx","utils/type_config.js","api/getAuthorizationHeader.js","api/ajax.js","api/index.js","utils/useHttp.js","pages/Nearby/StopRoute.jsx","components/Map/StopMarker.jsx","components/Map/Icon.jsx","components/Map/StopMarkers.jsx","components/Map/StationMarker.jsx","components/Map/StationMarkers.jsx","components/Map/index.jsx","pages/Nearby/index.jsx","components/Keyboard/KeyboardBase.jsx","components/Keyboard/KeyboardCity.jsx","components/Keyboard/KeyboardMore.jsx","components/Keyboard/index.jsx","components/SearchResult/index.jsx","components/RouteTable/Timer.jsx","components/RouteTable/index.jsx","components/RoutePage/index.jsx","App.js","webpack:///./src/index.js?b635","asset/icon/stop.svg","asset/icon/busNearStop.svg","asset/icon/GPS.svg","asset/icon/like_btn.svg","asset/icon/like_fill.svg","asset/icon/like.svg"],"names":["_path","_path2","_path3","_line","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","title","titleId","props","width","height","viewBox","fill","xmlns","ref","id","d","x1","y1","x2","y2","stroke","strokeLinecap","strokeDasharray","ForwardRef","SvgGoBack","strokeWidth","strokeLinejoin","SvgMap","Header","setKeyword","setShowMap","showMap","useState","search","setSearch","useEffect","token","PubSub","subscribe","_","state","prevState","slice","unsubscribe","navigate","useNavigate","className","Container","type","onClick","to","placeholder","value","onChange","e","src","require","default","alt","Nav","setIsBack","routeArr","name","defaultChecked","htmlFor","keyboard_base","keyboard_city","CityName","CityCode","City","keyboard_more","STORAGE_CITY","STORAGE_ROUTE","STORAGE_FAVORITES","getHistory","localStorage","getItem","JSON","parse","saveHistory","content","localHistory","stringify","setItem","Context","React","createContext","Layout","pathnameArr","useLocation","pathname","split","city","setCity","cityIndex","findIndex","cityObj","city_En","setRouteArr","keyword","isBack","handleShowMap","favorites","setFavorites","outlet","useOutlet","outletProps","search_keyword","decodeURI","Provider","SvgGps","SvgSearch","fillRule","clipRule","SvgLike","linkStyle","Index","as","href","rel","CityBus","RouteList","data","forEach","item","favorite","like","index","RouteUID","map","DepartureStopNameZh","DestinationStopNameZh","RouteName","Zh_tw","StationList","useContext","LocationCityCode","station","StationPosition","PositionLat","PositionLon","StationID","StationName","StationAddress","Stops","arr","DataList","setShow","setIndex","setCenter","page","handleShow","start","parentNode","dataset","centerstr","center","end","active","classList","favoriteObj","favoriteArr","newData","filter","prevData","onMouseOver","onTouchStart","undefined","Favorites","Loading","options","animationData","loading","NearbyStops","CITYBUS","ROUTENAME","NEARBY","STATION","getAuthorizationHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","hmacKey","process","format","update","HMAC","getHMAC","Authorization","ajax","url","paramStr","toString","fetch","headers","then","res","json","ROOT_URL","noCity","initCityBus","$select","apiCityBus","initStopOfRoute","apiStopOfRoute","routeName","initBusNearStop","apiBusNearStop","initEstimatedTime","apiEstimatedTime","initShape","apiShape","apiRouteName","a","stopOfRoute","busNearStop","estimatedTime","shape","stops","sort","first","second","StopID","newEstimatedTime","stop","result","Direction","push","StopSequence","bus","wkt","Wkt","read","Geometry","newGeoJson","toJson","coordinates","position","reverse","initNearby","apiNearby","initStation","apiStation","stationID","useHttp","location","control","setLoading","error","setError","setData","updateData","useCallback","cityBusData","routeNameData","newLocation","$spatialFilter","nearbyData","stationData","delay","setTimeout","clearTimeout","StopRoute","searchArr","StopMarker","icon","isActive","StopPosition","refReady","setRefReady","popupRef","useRef","openOn","Marker","Tooltip","offset","direction","opacity","permanent","Popup","r","StopName","A2EventType","StopStatus","EstimateTime","Math","floor","StopUID","goStopMarker","L","Icon","iconUrl","iconRetinaUrl","iconAnchor","popupAnchor","shadowUrl","shadowSize","shadowAnchor","iconSize","Point","goBusNearStopMarker","backStopMarker","backBusNearStopMarker","StationMarker","StopMarkers","activeIndex","busNearStopMarker","stopMarker","stations","lineColor","color","Map","setMap","zoom","setView","MapContainer","whenCreated","scrollWheelZoom","TileLayer","attribution","Polyline","pathOptions","positions","Nearby","useGeolocation","latitude","longitude","element","path","KeyboardBase","Number","isInteger","KeyboardCity","enterCity","setEnterCity","savecity","node","console","log","KeyboardMore","inputRadio","Keyboard","audio","route","current","currentTime","play","publish","SearchResult","noKeyboard","showData","trim","checked","Timer","setControl","count","setCount","toggleControl","timer","setInterval","clearInterval","StopsTable","Row","Col","xs","PlateNumb","RouteTable","fluid","RoutePage","stopsArr","stopsArrLen","propType","PropTypes","array","isRequired","func","bool","App","replace","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b206b993.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/keyboard.9a3d0b4a.svg\";","export default __webpack_public_path__ + \"static/media/Bus.f58a8cda.mp3\";","var _path, _path2, _path3, _line;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 93,\n    height: 39,\n    viewBox: \"0 0 93 39\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.472 7.4C1.152 7.4 0.96 7.592 0.96 7.912V11.112C0.96 11.432 1.152 11.624 1.472 11.624H5.184V32.488C5.184 32.84 5.376 33 5.696 33H9.024C9.376 33 9.536 32.84 9.536 32.488V11.624H13.248C13.6 11.624 13.76 11.432 13.76 11.112V7.912C13.76 7.592 13.6 7.4 13.248 7.4H1.472Z\",\n    fill: \"#1CC8EE\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24.1148 33C24.3308 33 24.4208 32.892 24.3668 32.694L21.3788 20.652C21.3428 20.472 21.2348 20.4 21.0728 20.4H18.5708C18.4088 20.4 18.3008 20.472 18.2648 20.652L15.2768 32.694C15.2228 32.892 15.3127 33 15.5108 33H17.2748C17.4368 33 17.5268 32.91 17.5628 32.748L18.1208 30.48H21.5048L22.0808 32.748C22.1168 32.91 22.2068 33 22.3688 33H24.1148ZM20.9468 28.392H18.6788L19.8128 23.496L20.9468 28.392ZM26.1196 33C25.9216 33 25.8316 32.892 25.8316 32.712V20.688C25.8316 20.508 25.9216 20.4 26.1196 20.4H27.9916C28.1716 20.4 28.2796 20.508 28.2796 20.688V32.712C28.2796 32.892 28.1716 33 27.9916 33H26.1196ZM40.2735 20.4C40.0395 20.4 39.9315 20.508 39.8955 20.742L38.9775 28.266H38.8875L37.1235 20.706C37.0695 20.508 36.9435 20.4 36.7275 20.4H35.6295C35.4135 20.4 35.2875 20.508 35.2335 20.706L33.4695 28.266H33.3795L32.4975 20.742C32.4615 20.508 32.3355 20.4 32.1195 20.4H30.4275C30.1755 20.4 30.0495 20.544 30.0855 20.778L31.7415 32.658C31.7775 32.892 31.9035 33 32.1375 33H34.1175C34.3335 33 34.4595 32.892 34.5135 32.676L36.1875 25.296L37.8435 32.676C37.8975 32.892 38.0235 33 38.2395 33H40.1835C40.4175 33 40.5435 32.892 40.5795 32.676L42.3075 20.778C42.3435 20.544 42.2175 20.4 41.9655 20.4H40.2735ZM51.3081 33C51.5241 33 51.6141 32.892 51.5601 32.694L48.5721 20.652C48.5361 20.472 48.4281 20.4 48.2661 20.4H45.7641C45.6021 20.4 45.4941 20.472 45.4581 20.652L42.4701 32.694C42.4161 32.892 42.5061 33 42.7041 33H44.4681C44.6301 33 44.7201 32.91 44.7561 32.748L45.3141 30.48H48.6981L49.2741 32.748C49.3101 32.91 49.4001 33 49.5621 33H51.3081ZM48.1401 28.392H45.8721L47.0061 23.496L48.1401 28.392ZM58.731 20.4C58.533 20.4 58.443 20.508 58.443 20.688V27.51L55.059 20.634C54.987 20.472 54.897 20.4 54.735 20.4H53.313C53.133 20.4 53.025 20.508 53.025 20.688V32.712C53.025 32.892 53.133 33 53.313 33H55.005C55.203 33 55.293 32.892 55.293 32.712V25.89L58.677 32.766C58.749 32.928 58.839 33 59.001 33H60.423C60.603 33 60.711 32.892 60.711 32.712V20.688C60.711 20.508 60.603 20.4 60.423 20.4H58.731ZM74.2352 21.192C74.2352 19.5 73.3172 18.6 71.6252 18.6H67.3052C67.1252 18.6 67.0172 18.69 67.0172 18.888V32.712C67.0172 32.892 67.1252 33 67.3052 33H71.6252C73.3172 33 74.2352 32.1 74.2352 30.408V27.096C74.2352 26.43 73.7492 25.926 73.1012 25.818V25.782C73.7492 25.674 74.2352 25.17 74.2352 24.504V21.192ZM71.8412 23.91C71.8412 24.36 71.5892 24.612 71.1212 24.612H69.4832V20.976H71.1212C71.6072 20.976 71.8412 21.228 71.8412 21.696V23.91ZM71.8412 29.904C71.8412 30.39 71.5892 30.624 71.1212 30.624H69.4832V26.988H71.1212C71.6072 26.988 71.8412 27.24 71.8412 27.708V29.904ZM81.2188 20.4C81.0208 20.4 80.8588 20.562 80.8588 20.76V29.904C80.8588 30.39 80.6068 30.624 80.1388 30.624H79.2028C78.7348 30.624 78.4828 30.39 78.4828 29.904V20.76C78.4828 20.562 78.3208 20.4 78.1228 20.4H76.3948C76.1968 20.4 76.0348 20.562 76.0348 20.76V30.408C76.0348 32.1 76.9348 33 78.6268 33H80.6428C82.3348 33 83.2348 32.1 83.2348 30.408V20.76C83.2348 20.562 83.0728 20.4 82.8748 20.4H81.2188ZM87.451 20.4C85.777 20.4 84.859 21.3 84.859 22.992V26.106C84.859 26.448 85.021 26.664 85.345 26.772L89.665 28.176V29.994C89.665 30.48 89.413 30.714 88.945 30.714H87.973C87.523 30.714 87.253 30.48 87.253 29.994V29.238C87.253 29.04 87.163 28.95 86.965 28.95H85.147C84.967 28.95 84.859 29.04 84.859 29.238V30.408C84.859 32.1 85.777 33 87.451 33H89.467C91.159 33 92.059 32.1 92.059 30.408V27.024C92.059 26.682 91.897 26.466 91.591 26.358L87.235 24.954V23.424C87.235 22.956 87.505 22.704 87.955 22.704H88.945C89.431 22.704 89.665 22.956 89.665 23.424V24.18C89.665 24.36 89.773 24.468 89.953 24.468H91.771C91.969 24.468 92.059 24.36 92.059 24.18V22.992C92.059 21.3 91.159 20.4 89.467 20.4H87.451Z\",\n    fill: \"#F5F5F5\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17 13.2632C17 14.0968 17.3656 14.8453 17.9375 15.3663V17.0526C17.9375 17.5737 18.3594 18 18.875 18H19.8125C20.3281 18 20.75 17.5737 20.75 17.0526V16.1053H28.25V17.0526C28.25 17.5737 28.6719 18 29.1875 18H30.125C30.6406 18 31.0625 17.5737 31.0625 17.0526V15.3663C31.6344 14.8453 32 14.0968 32 13.2632V3.78947C32 0.473684 28.6438 0 24.5 0C20.3562 0 17 0.473684 17 3.78947V13.2632ZM20.2812 14.2105C19.5031 14.2105 18.875 13.5758 18.875 12.7895C18.875 12.0032 19.5031 11.3684 20.2812 11.3684C21.0594 11.3684 21.6875 12.0032 21.6875 12.7895C21.6875 13.5758 21.0594 14.2105 20.2812 14.2105ZM28.7188 14.2105C27.9406 14.2105 27.3125 13.5758 27.3125 12.7895C27.3125 12.0032 27.9406 11.3684 28.7188 11.3684C29.4969 11.3684 30.125 12.0032 30.125 12.7895C30.125 13.5758 29.4969 14.2105 28.7188 14.2105ZM30.125 8.52632H18.875V3.78947H30.125V8.52632Z\",\n    fill: \"#F5F5F5\"\n  })), _line || (_line = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 34.5,\n    y1: 16.5,\n    x2: 90.5,\n    y2: 16.5,\n    stroke: \"#F5F5F5\",\n    strokeLinecap: \"round\",\n    strokeDasharray: \"2 4\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.66637c64.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgGoBack(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15 18L9 12L15 6\",\n    stroke: \"#F5F5F5\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgGoBack);\nexport default __webpack_public_path__ + \"static/media/goBack.d842da2e.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMap(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 1.77783C9.22123 1.77783 6.96875 4.03031 6.96875 6.80908C6.96875 9.05557 10.257 13.1501 11.5168 14.6363C11.772 14.9373 12.2284 14.9373 12.4832 14.6363C13.743 13.1501 17.0312 9.05557 17.0312 6.80908C17.0312 4.03031 14.7788 1.77783 12 1.77783ZM12 8.48617C11.0736 8.48617 10.3229 7.73547 10.3229 6.80908C10.3229 5.88269 11.0736 5.132 12 5.132C12.9264 5.132 13.6771 5.88269 13.6771 6.80908C13.6771 7.73547 12.9264 8.48617 12 8.48617ZM1.3034 10.4008C1.06629 10.4957 0.863021 10.6594 0.719822 10.8708C0.576622 11.0823 0.500057 11.3318 0.5 11.5872L0.5 21.5826C0.5 22.0346 0.956406 22.3437 1.37608 22.176L6.88889 19.6667V10.3597C6.5359 9.72162 6.2472 9.1003 6.04036 8.50613L1.3034 10.4008ZM12 16.1397C11.4382 16.1397 10.9067 15.8929 10.5421 15.4624C9.7571 14.536 8.92215 13.4811 8.16667 12.399V19.6663L15.8333 22.2219V12.3994C15.0778 13.4811 14.2433 14.5364 13.4579 15.4628C13.0933 15.8929 12.5618 16.1397 12 16.1397ZM22.6239 8.21304L17.1111 10.7223V22.2223L22.6966 19.9882C22.9337 19.8934 23.137 19.7297 23.2802 19.5182C23.4235 19.3067 23.5 19.0572 23.5 18.8018V8.80641C23.5 8.35439 23.0436 8.04533 22.6239 8.21304Z\",\n    fill: \"#F5F5F5\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMap);\nexport default __webpack_public_path__ + \"static/media/map.610382a7.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport PubSub from \"pubsub-js\";\nimport PropTypes from 'prop-types';\nimport { Container } from \"react-bootstrap\";\n\nimport { ReactComponent as Logo } from \"../../asset/icon/logo.svg\";\nimport { ReactComponent as GoBack } from \"../../asset/icon/goBack.svg\";\nimport { ReactComponent as MapSVG } from \"../../asset/icon/map.svg\";\nimport \"./header.scss\";\n\nexport default function Header({ setKeyword, setShowMap, showMap }) {\n\n  const [search, setSearch] = useState('');\n  \n  useEffect(() => {\n    const token = PubSub.subscribe(\"search\", (_, state) => {\n      switch (state) {\n        case \"\":\n          setSearch(prevState => prevState.slice(0, -1))\n          break;\n        case \"C\":\n          setSearch('')\n          break;\n        default:\n          setSearch(prevState => prevState + state)\n      }\n    })\n    return () => {\n      PubSub.unsubscribe(token);\n    }\n  }, [])\n\n  useEffect(() => {\n    setKeyword(search)\n  }, [setKeyword, search])\n\n  const handleSearch = (e) => {\n    setSearch(e.target.value);\n  }\n\n  const navigate = useNavigate();\n\n  const goBack = () => {\n    navigate(-1);\n  }\n\n  const toggleMap = () => {\n    setShowMap(!showMap)\n  }\n\n  return (\n    <header className=\"fixed-top\">\n      <Container className=\"d-flex align-items-end py-3\">\n        <div className=\"d-flex justify-content-end align-items-center w-100\">\n          <div className=\"result_show\">\n            <button type=\"button\" onClick={goBack} aria-label=\" Go back\">\n              <GoBack />\n            </button>\n          </div>\n          <div className=\"logo d-flex justify-content-center\">\n            <Link\n              to=\"/\"\n              className=\"d-block flex-shrink-0\"\n              aria-label=\" Homepage\"\n            >\n              <h1>\n                <Logo />\n                Taiwan Bus\n              </h1>\n            </Link>\n          </div>\n          <div className=\"page_show\">\n            <div>\n              <input\n                type=\"search\"\n                id=\"search\"\n                placeholder=\"\"\n                aria-label=\"\"\n                className=\"w-100\"\n                value={search}\n                onChange={handleSearch}\n              />\n            </div>\n          </div>\n          <div className=\"result_show d-flex justify-content-end\">\n            <button\n              onClick={toggleMap}\n              className=\"flex-shrink-0 position-relative map\"\n              aria-label=\" Map\"\n            >\n              <MapSVG />\n              <span className={`crossIcon ${showMap ? \"showCross\" : \"\"}`}></span>\n            </button>\n          </div>\n          <div className=\"page_show like\">\n            <Link\n              to=\"/favorites\"\n              className=\"flex-shrink-0 ms-2 d-block\"\n              aria-label=\" Favorites\"\n            >\n              <img src={require('../../asset/icon/like_btn.svg').default} alt=\" Favorites\" />\n            </Link>\n          </div>\n        </div>\n      </Container>\n    </header>\n  );\n}\n\n\nHeader.propTypes = {\n  setKeyword: PropTypes.func.isRequired,\n  setShowMap: PropTypes.func.isRequired,\n  showMap: PropTypes.bool.isRequired\n}","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport \"./nav.scss\";\n\nexport default function Nav({ setIsBack, routeArr }) {\n\n  const isBack = (e) => {\n    const { id } = e.target;\n    if (id === '') return\n    const isBackValue = id === \"back\";\n    setIsBack(isBackValue)\n  }\n\n  return (\n    <div className=\"fixed-top nav\" onClick={isBack}>\n      <input type=\"radio\" className=\"d-none\" name=\"direction\" id=\"go\" defaultChecked />\n      <input type=\"radio\" className=\"d-none\" name=\"direction\" id=\"back\" />\n      <ul className=\"nav-list\">\n        <li className=\"w-50\">\n          <label htmlFor=\"go\" className=\"nav-link d-block p-4\">\n            <h2 className=\"text-center text-one-line\">\n              <span className=\"text-primary me-1\">\n                \n              </span>\n              {routeArr[1]}\n            </h2>\n          </label>\n        </li>\n        <li className=\"w-50\">\n          <label htmlFor=\"back\" className=\"nav-link d-block p-4\">\n            <h2 className=\"text-center text-one-line\">\n              <span className=\"text-primary me-1\">\n                \n              </span>\n              {routeArr[0]}\n            </h2>\n          </label>\n        </li>\n      </ul>\n    </div>\n  );\n}\n\nNav.propTypes = {\n  setIsBack: PropTypes.func.isRequired\n}","export const keyboard_base = [\n  \"\", \"\", 1, 2, 3,\n  \"\", \"\", 4, 5, 6,\n  \"\", \"\", 7, 8, 9,\n  \"\", \"\", \"C\", 0, \"\",\n];\nexport const keyboard_city = [\n  { CityName: \"\", CityCode: \"TPE\", City: \"Taipei\" },\n  { CityName: \"\", CityCode: \"NWT\", City: \"NewTaipei\" },\n  { CityName: \"\", CityCode: \"KEE\", City: \"Keelung\" },\n  { CityName: \"\", CityCode: \"TAO\", City: \"Taoyuan\" },\n  { CityName: \"\", CityCode: \"HSZ\", City: \"Hsinchu\" },\n  { CityName: \"\", CityCode: \"HSQ\", City: \"HsinchuCounty\" },\n  { CityName: \"\", CityCode: \"MIA\", City: \"MiaoliCounty\" },\n  { CityName: \"\", CityCode: \"TXG\", City: \"Taichung\" },\n  { CityName: \"\", CityCode: \"NAN\", City: \"NantouCounty\" },\n  { CityName: \"\", CityCode: \"CHA\", City: \"ChanghuaCounty\" },\n  { CityName: \"\", CityCode: \"YUN\", City: \"YunlinCounty\" },\n  { CityName: \"\", CityCode: \"CYI\", City: \"Chiayi\" },\n  { CityName: \"\", CityCode: \"CYQ\", City: \"ChiayiCounty\" },\n  { CityName: \"\", CityCode: \"TNN\", City: \"Tainan\" },\n  { CityName: \"\", CityCode: \"KHH\", City: \"Kaohsiung\" },\n  { CityName: \"\", CityCode: \"PIF\", City: \"PingtungCounty\" },\n  { CityName: \"\", CityCode: \"TTT\", City: \"TaitungCounty\" },\n  { CityName: \"\", CityCode: \"HUA\", City: \"HualienCounty\" },\n  { CityName: \"\", CityCode: \"ILA\", City: \"YilanCounty\" },\n  { CityName: \"\", CityCode: \"PEN\", City: \"PenghuCounty\" },\n  { CityName: \"\", CityCode: \"KIN\", City: \"KinmenCounty\" },\n  { CityName: \"\", CityCode: \"LIE\", City: \"LienchiangCounty\" }\n]\nexport const keyboard_more = [\n  \"F\", \"R\", \"T\", \"\", \"\",\n  \"\", \"\", \"\", \"\", \"\",\n  \"\", \"\"\n]","export const STORAGE_CITY = \"taiwan_bus_$city\";\nexport const STORAGE_ROUTE = \"taiwan_bus_$route\";\nexport const STORAGE_FAVORITES = \"taiwan_bus_$favorites\";\n\nexport const getHistory = (type) => {\n  if (localStorage.getItem(type)) {\n    return JSON.parse(localStorage.getItem(type));\n  }\n};\n\nexport const saveHistory = (type, content) => {\n  const localHistory = JSON.stringify(content)\n  localStorage.setItem(type, localHistory);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useLocation, useOutlet } from \"react-router-dom\";\n\nimport Header from \"../../components/Header\";\nimport Nav from \"../../components/Nav\";\nimport { keyboard_city } from \"../../utils/keyboard_config\";\nimport {\n  STORAGE_CITY,\n  STORAGE_ROUTE,\n  STORAGE_FAVORITES,\n  getHistory,\n  saveHistory,\n} from \"../../utils/localStorage\";\n\nexport const Context = React.createContext({});\n\nexport function Layout() {\n  /*  */\n  const { pathname } = useLocation();\n  const pathnameArr = pathname.split(\"/\");\n\n  /* City State */\n  const [city, setCity] = useState(getHistory(STORAGE_CITY) || \"\");\n  const handleCity = (e) => {\n    setCity(e);\n    saveHistory(STORAGE_CITY, e || \"\");\n  };\n  /* City English name */\n  const cityIndex = keyboard_city.findIndex(\n    (cityObj) => cityObj.CityName === city\n  );\n  const city_En = keyboard_city[cityIndex]?.City || \"\";\n\n  /* Route Start and End State */\n  const [routeArr, setRouteArr] = useState(\n    getHistory(STORAGE_ROUTE) || [\"start\", \"end\"]\n  );\n  const handleRouteArr = (e) => {\n    setRouteArr(e);\n    saveHistory(STORAGE_ROUTE, e);\n  };\n\n  /* Search keyword State */\n  const [keyword, setKeyword] = useState(\"\");\n  const handleKeyword = (e) => {\n    setKeyword(e);\n  };\n\n  /* Bus direction State */\n  const [isBack, setIsBack] = useState(false);\n  const handleIsBack = (e) => {\n    setIsBack(e);\n  };\n\n  /* Show map State */\n  const [showMap, setShowMap] = useState(false);\n  const handleShowMap = (e) => {\n    setShowMap(e);\n  };\n\n  /* Favorites State */\n  const [favorites, setFavorites] = useState(\n    getHistory(STORAGE_FAVORITES) || []\n  );\n  const handleFavorites = (e) => {\n    setFavorites(e);\n  };\n\n  useEffect(() => {\n    saveHistory(STORAGE_FAVORITES, favorites);\n  }, [favorites]);\n\n  /*  outlet props */\n  const outlet = useOutlet();\n  const outletProps = {\n    city: city,\n    city_En: city_En,\n    setCity: handleCity,\n    keyword: keyword,\n    isBack: isBack,\n    search_keyword: decodeURI(pathnameArr[2]),\n    setRouteArr: handleRouteArr,\n    setShowMap: handleShowMap,\n    showMap: showMap,\n    favorites: favorites,\n    setFavorites: handleFavorites,\n  };\n\n  return (\n    <div\n      className={`wrap vh-100${\n        pathnameArr[1] === \"\"\n          ? \"\"\n          : pathnameArr[1] !== \"citybus\"\n          ? \" page \" + pathnameArr[1]\n          : pathnameArr[2]\n          ? \" page result\"\n          : \" page\"\n      }`}\n    >\n      <Header\n        setKeyword={handleKeyword}\n        setShowMap={handleShowMap}\n        showMap={showMap}\n      />\n      <Nav setIsBack={handleIsBack} routeArr={routeArr} />\n      <Context.Provider value={outletProps}>{outlet}</Context.Provider>\n    </div>\n  );\n}\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgGps(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.3448 20.157C6.52049 13.1631 5.625 12.4454 5.625 9.875C5.625 6.35417 8.47917 3.5 12 3.5C15.5208 3.5 18.375 6.35417 18.375 9.875C18.375 12.4454 17.4795 13.1631 12.6552 20.157C12.3386 20.6143 11.6614 20.6143 11.3448 20.157ZM12 12.5312C13.467 12.5312 14.6562 11.342 14.6562 9.875C14.6562 8.40799 13.467 7.21875 12 7.21875C10.533 7.21875 9.34375 8.40799 9.34375 9.875C9.34375 11.342 10.533 12.5312 12 12.5312Z\",\n    fill: \"#F5F5F5\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgGps);\nexport default __webpack_public_path__ + \"static/media/GPS.e4f566a1.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSearch(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M6.61621 11.328C6.61621 8.72561 8.72585 6.61597 11.3282 6.61597C13.9306 6.61597 16.0403 8.72561 16.0403 11.328C16.0403 12.5827 15.5499 13.7228 14.7503 14.5672C14.7165 14.5933 14.6839 14.6219 14.6529 14.6529C14.6219 14.6839 14.5933 14.7165 14.5672 14.7503C13.7228 15.5497 12.5828 16.04 11.3282 16.04C8.72585 16.04 6.61621 13.9304 6.61621 11.328ZM15.3144 16.7287C14.1997 17.5528 12.8209 18.04 11.3282 18.04C7.62129 18.04 4.61621 15.0349 4.61621 11.328C4.61621 7.62104 7.62129 4.61597 11.3282 4.61597C15.0352 4.61597 18.0403 7.62104 18.0403 11.328C18.0403 12.8208 17.5529 14.1998 16.7287 15.3145L19.0911 17.6769C19.4816 18.0674 19.4816 18.7006 19.0911 19.0911C18.7006 19.4817 18.0674 19.4817 17.6769 19.0911L15.3144 16.7287Z\",\n    fill: \"#F5F5F5\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSearch);\nexport default __webpack_public_path__ + \"static/media/search.35200db0.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLike(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19.5695 5.57411C19.1322 5.13652 18.6129 4.7894 18.0413 4.55257C17.4697 4.31574 16.8571 4.19385 16.2384 4.19385C15.6197 4.19385 15.0071 4.31574 14.4355 4.55257C13.864 4.7894 13.3447 5.13652 12.9073 5.57411L11.9996 6.48182L11.0919 5.57411C10.2084 4.69063 9.01015 4.19431 7.76073 4.19431C6.51132 4.19431 5.31307 4.69063 4.4296 5.57411C3.54613 6.45758 3.0498 7.65582 3.0498 8.90524C3.0498 10.1547 3.54613 11.3529 4.4296 12.2364L5.33732 13.1441L11.9996 19.8063L18.6618 13.1441L19.5695 12.2364C20.0071 11.799 20.3542 11.2797 20.5911 10.7081C20.8279 10.1366 20.9498 9.52392 20.9498 8.90524C20.9498 8.28655 20.8279 7.67392 20.5911 7.10235C20.3542 6.53079 20.0071 6.01148 19.5695 5.57411V5.57411Z\",\n    stroke: \"#414242\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLike);\nexport default __webpack_public_path__ + \"static/media/like.dc7292e2.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Container } from \"react-bootstrap\";\n\nimport { ReactComponent as GPS } from \"../../asset/icon/GPS.svg\";\nimport { ReactComponent as Search } from \"../../asset/icon/search.svg\";\nimport { ReactComponent as Like } from \"../../asset/icon/like.svg\";\nimport \"./index.scss\";\n\nconst linkStyle = {\n  className: \"btn btn-primary fs-3 p-2\",\n};\n\nexport default function Index() {\n  return (\n    <Container className=\"position-relative\" as=\"nav\">\n      <ul className=\"router\">\n        <li>\n          <Link to=\"nearby\" {...linkStyle}>\n            <GPS />\n            <span></span>\n          </Link>\n        </li>\n        <li>\n          <Link to=\"citybus\" {...linkStyle}>\n            <Search />\n            <span></span>\n          </Link>\n        </li>\n        <li>\n          <Link to=\"favorites\" {...linkStyle}>\n            <Like />\n            <span></span>\n          </Link>\n        </li>\n      </ul>\n      <footer className=\"fixed-bottom d-flex justify-content-center fs-4 p-4 fw-light\">\n        Taiwan Bus  Code:&nbsp;\n        <a\n          href=\"https://github.com/JohnsonMao/taiwan_bus\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          Mao\n        </a>\n        &nbsp;/ Design:&nbsp;\n        <a\n          href=\"https://ktdesigner.neocities.org/UIweb/TaiwanBus.html\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          KT\n        </a>\n      </footer>\n    </Container>\n  );\n}\n","import React from 'react';\nimport { Outlet } from \"react-router-dom\";\n\nexport default function CityBus() {\n  \n  return (\n    <main className=\"main\">\n      <Outlet />\n    </main>\n  )\n}\n","import React from 'react'\nimport { Link } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\n\n\n\nexport default function RouteList({ data = [], favorites = [] }) {\n\n  data.forEach((item) => {\n    item.favorite = false;\n  });\n  favorites.forEach((like) => {\n    const index = data.findIndex((item) => item?.RouteUID === like.RouteUID);\n    if (index !== -1) {\n      data[index].favorite = true;\n    }\n  });\n\n  return (\n    <>\n      {\n        data.map((item) => (\n          <li\n            key={item.RouteUID}\n            className=\"d-flex justify-content-between align-items-center\"\n            data-start={item.DepartureStopNameZh}\n            data-end={item.DestinationStopNameZh}\n          >\n            <Link\n              to={\"/citybus/\" + item.RouteName.Zh_tw}\n              className=\"d-block px-4 py-3\"\n              data-start={item.DepartureStopNameZh}\n              data-end={item.DestinationStopNameZh}\n            >\n              <h3 className=\"fs-1 lh-base text-one-line\">\n                {item.RouteName.Zh_tw}\n              </h3>\n              <h4\n                className=\"fs-3 text-light lh-base text-one-line\"\n                data-start={item.DepartureStopNameZh}\n                data-end={item.DestinationStopNameZh}\n              >\n                {item.DepartureStopNameZh}\n                <span className=\"text-primary mx-1\"></span>\n                {item.DestinationStopNameZh}\n              </h4>\n            </Link>\n            <button\n              type=\"button\"\n              className=\"btn-favorite p-0\"\n              data-favorite={\n                item.RouteUID +\n                \"&\" +\n                item.RouteName.Zh_tw +\n                \"&\" +\n                item.DepartureStopNameZh +\n                \"&\" +\n                item.DestinationStopNameZh\n              }\n            >\n              {item.favorite ? (\n                <img\n                  src={require(\"../../asset/icon/like_fill.svg\").default}\n                  className=\"active d-block py-6 px-5\"\n                  alt=\"like_off\"\n                />\n              ) : (\n                <img\n                  src={require(\"../../asset/icon/like.svg\").default}\n                  className=\"d-block py-6 px-5\"\n                  alt=\"like_off\"\n                />\n              )}\n            </button>\n          </li>\n        ))\n      }\n    </>\n  )\n}\n\nRouteList.propTypes = {\n  data: PropTypes.array,\n  favorites: PropTypes.array,\n}","import { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\n\nimport { Context } from \"../../pages/Layout\";\nimport { keyboard_city } from \"../../utils/keyboard_config\";\n\nexport default function StationList({ data = [] }) {\n  const { city, setCity } = useContext(Context);\n  const cityIndex = keyboard_city.findIndex(\n    (cityObj) => cityObj.CityCode === data[0]?.LocationCityCode\n  );\n\n  if (cityIndex !== -1 && city !== keyboard_city[cityIndex].CityName) {\n    setCity(keyboard_city[cityIndex].CityName);\n  }\n\n  return (\n    <>\n      {data.map((station, index) => {\n        const { PositionLat, PositionLon } = station.StationPosition;\n        return (\n          <li\n            key={index}\n            className=\"d-flex justify-content-between align-items-center\"\n            data-centerstr={PositionLat + \"-\" + PositionLon}\n            data-index={index}\n          >\n            <Link\n              to={station.StationID + \"-\" + station.StationName.Zh_tw}\n              data-centerstr={PositionLat + \"-\" + PositionLon}\n              data-index={index}\n              className=\"d-block px-4 py-3\"\n            >\n              <h3 className=\"fs-1 lh-base text-one-line\">\n                {station.StationName.Zh_tw}\n              </h3>\n              <h4 className=\"fs-3 text-gray-light lh-base text-one-line\">\n                {station.StationAddress}\n              </h4>\n              <p className=\"fs-3 text-light lh-base wb-keep-all m-0\">\n                {station.Stops.map((item, index, arr) => {\n                  const max = arr.length - 1;\n                  if (index !== max) {\n                    return item.RouteName.Zh_tw + \", \";\n                  } else {\n                    return item.RouteName.Zh_tw;\n                  }\n                })}\n              </p>\n            </Link>\n          </li>\n        );\n      })}\n    </>\n  );\n}\n\nStationList.propTypes = {\n  data: PropTypes.array,\n};\n","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\n\nimport { Context } from \"../../pages/Layout\";\nimport RouteList from \"./RouteList\";\nimport StationList from \"./StationList\";\nimport \"./datalist.scss\";\n\nexport default function DataList({\n  setShow,\n  setIndex,\n  setCenter,\n  title,\n  data = [],\n  page,\n}) {\n  const { setRouteArr, favorites, setFavorites } = useContext(Context);\n\n  /*  */\n  const onClickRoute = (e) => {\n    const { start, end, favorite } = e.target.parentNode.dataset;\n    if (!favorite) {\n      setRouteArr([start, end]);\n    }\n    if (favorite) {\n      const active = e.target.classList[0];\n      const favoriteObj = {\n        RouteName: {},\n      };\n      const favoriteArr = favorite.split(\"&\");\n      favoriteObj.RouteUID = favoriteArr[0];\n      favoriteObj.RouteName.Zh_tw = favoriteArr[1];\n      favoriteObj.DepartureStopNameZh = favoriteArr[2];\n      favoriteObj.DestinationStopNameZh = favoriteArr[3];\n      switch (active) {\n        case \"active\":\n          const newData = favorites.filter(\n            (favorite) => favorite.RouteUID !== favoriteObj.RouteUID\n          );\n          setFavorites(newData);\n          break;\n        default:\n          setFavorites((prevData) => [...prevData, favoriteObj]);\n      }\n    }\n  };\n\n  /*  */\n  const handleShow = (e) => {\n    const { start } = e.target.parentNode.dataset;\n    if (setShow && start) {\n      setShow(); /* Keyboard */\n    }\n  };\n\n  /*  */\n  const onClickStation = (e) => {\n    const centerstr =\n      e.target.parentNode.dataset.centerstr || e.target.dataset.centerstr;\n    const index = e.target.parentNode.dataset.index || e.target.dataset.index;\n    if (centerstr) {\n      const center = centerstr.split(\"-\");\n      setCenter(center);\n      setIndex(index);\n    }\n  };\n\n  return (\n    <div className={`datalist ${page === \"nearby\" ? \"pt-7\" : \"py-7\"}`}>\n      <h2 className=\"fs-2 mb-1\">{title || \"\"}</h2>\n      <ul\n        className={title === \"\" ? \"\" : \"pb-7\"}\n        onClick={title === \"\" ? onClickStation : onClickRoute}\n        onMouseOver={handleShow}\n        onTouchStart={handleShow}\n      >\n        {title === \"\" ? (\n          <StationList data={data} />\n        ) : title === \"\" && data[0] === undefined ? (\n          <Link to=\"/citybus\" className=\"fs-3\">\n            \n          </Link>\n        ) : (\n          <RouteList data={data} favorites={favorites} />\n        )}\n      </ul>\n    </div>\n  );\n}\n\nDataList.propTypes = {\n  setShow: PropTypes.func,\n  title: PropTypes.string,\n  data: PropTypes.array,\n  page: PropTypes.string,\n  zoom: PropTypes.number,\n  map: PropTypes.object,\n};\n","import React, { useContext } from \"react\";\nimport { Container } from 'react-bootstrap';\n\nimport { Context } from \"../../pages/Layout\";\nimport DataList from \"../../components/DataList\";\n\nexport default function Favorites() {\n  const { favorites } = useContext(Context);\n\n  return (\n    <main className=\"main\">\n      <Container className=\"content\">\n        <DataList title=\"\" data={favorites} />\n      </Container>\n    </main>\n  );\n}\n","import React from \"react\";\nimport Lottie from \"lottie-react-web\";\n\nimport loading from \"../../asset/loading.json\";\n\nexport default function Loading() {\n  return (\n    <div className=\"position-fixed top-0 bottom-0 start-0 end-0 d-flex flex-column align-items-center justify-content-around\">\n      <div className=\"loading\">\n        <Lottie\n          options={{\n            animationData: loading,\n          }}\n        />\n      </div>\n      <div></div>\n    </div>\n  );\n}\n","import DataList from \"../../components/DataList\";\nimport Loading from \"../../components/Loading\";\n\nexport default function NearbyStops({ data, setIndex, setCenter, loading }) {\n  return (\n    <>\n      {loading ? (\n        <Loading />\n      ) : (\n        <DataList\n          title=\"\"\n          data={data}\n          setIndex={setIndex}\n          setCenter={setCenter}\n          page=\"nearby\"\n        />\n      )}\n    </>\n  );\n}\n","export const CITYBUS = \"cityBus\";\nexport const ROUTENAME = \"routeName\";\nexport const NEARBY = \"nearby\";\nexport const STATION = \"station\";","import jsSHA from \"jssha/dist/sha1\";\n\nexport default function getAuthorizationHeader() {\n  let AppID = process.env.REACT_APP_TDX_ID;\n  let AppKey = process.env.REACT_APP_TDX_KEY;\n  let GMTString = new Date().toGMTString();\n\n  let ShaObj = new jsSHA(\"SHA-1\", \"TEXT\", {\n    hmacKey: { value: AppKey, format: \"TEXT\" },\n  });\n  ShaObj.update(\"x-date: \" + GMTString);\n  let HMAC = ShaObj.getHMAC(\"B64\");\n  let Authorization = `hmac username=\"${AppID}\",algorithm=\"hmac-sha1\",headers=\"x-date\",signature=\"${HMAC}\"`;\n  return { Authorization: Authorization, \"X-Date\": GMTString };\n}\n","import getAuthorizationHeader from \"./getAuthorizationHeader\";\n\nexport default function ajax(url, data = {}) {\n  let paramStr = \"\";\n  Object.keys(data).forEach((key) => {\n    paramStr += key + \"=\" + data[key].toString() + \"&\";\n  });\n  paramStr += \"$format=JSON\";\n\n  return fetch(url + \"?\" + paramStr, {\n    headers: getAuthorizationHeader(),\n  }).then((res) => {\n    return res.json();\n  });\n}\n","import ajax from \"./ajax\";\nimport Wkt from \"wicket\";\n\nconst ROOT_URL = \"https://ptx.transportdata.tw/MOTC/v2/Bus\";\n\nconst noCity = [0, \"Please set the city parameters\"];\n\n/*  */\nconst initCityBus = {\n  $select: [\n    \"RouteUID\",\n    \"RouteName\",\n    \"DepartureStopNameZh\",\n    \"DestinationStopNameZh\",\n  ],\n};\n\n/* City Bus API */\nexport const apiCityBus = (city = \"\") =>\n  city === \"\" ? noCity : ajax(ROOT_URL + \"/Route/City/\" + city, initCityBus);\n\n/* \n *\n * RouteUID \n * Direction \n * Stops \n *    StopID\n *    StopName\n *    StopBoarding [-1:'',0:'',1:'']\n *    StopSequence \n *    StopPosition \n *        PositionLon \n *        PositionLat \n *        GeoHash \n */\n/*  */\nconst initStopOfRoute = {\n  $select: [\"RouteUID\", \"Direction\", \"Stops\"],\n};\n\nconst apiStopOfRoute = (city = \"\", routeName = \"\") =>\n  ajax(\n    ROOT_URL + \"/StopOfRoute/City/\" + city + \"/\" + routeName,\n    initStopOfRoute\n  );\n\n/* \n *\n * PlateNumb \n * StopID \n * A2EventType : [0:'',1:'']\n */\nconst initBusNearStop = {\n  $select: [\"PlateNumb\", \"StopID\", \"A2EventType\"],\n};\n\nconst apiBusNearStop = (city = \"\", routeName = \"\") =>\n  ajax(\n    ROOT_URL + \"/RealTimeNearStop/City/\" + city + \"/\" + routeName,\n    initBusNearStop\n  );\n\n/* \n *\n * RouteName \n * StopID \n * Direction  [0:'',1:'',2:'',255:'']\n * EstimateTime  [ StopStatus ]\n * StopStatus  [0:'',1:'',2:'',3:'',4:'']\n */\nconst initEstimatedTime = {\n  $select: [\"RouteName\", \"StopID\", \"Direction\", \"EstimateTime\", \"StopStatus\"],\n};\n\nconst apiEstimatedTime = (city = \"\", routeName = \"\") =>\n  ajax(\n    ROOT_URL + \"/EstimatedTimeOfArrival/City/\" + city + \"/\" + routeName,\n    initEstimatedTime\n  );\n\n/* \n *\n * RouteUID\n * RouteName\n * Direction\n * Geometry \n */\nconst initShape = {\n  $select: [\"RouteUID\", \"RouteName\", \"Direction\", \"Geometry\"],\n};\n\nconst apiShape = (city = \"\", routeName = \"\") =>\n  ajax(ROOT_URL + \"/Shape/City/\" + city + \"/\" + routeName, initShape);\n\n/*  Route  */\nexport const apiRouteName = async (city = \"\", routeName = \"\") => {\n  if (city === \"\") {\n    return noCity;\n  }\n  const stopOfRoute = await apiStopOfRoute(city, routeName);\n  const busNearStop = await apiBusNearStop(city, routeName);\n  const estimatedTime = await apiEstimatedTime(city, routeName);\n  const shape = await apiShape(city, routeName);\n  /* stopOfRoute   [{Direction: 0, stops: [...], ...}, {Direction: 1, stops: [...], ...}]\n   * busNearStop   [{Direction..., StopUID..., Plate..., A2E... }, ...]\n   * estimatedTime [{Direction..., StopUID..., Estimate..., StopStatus...}, ...]\n   */\n\n  /*  */\n  let stops = [...stopOfRoute[0].Stops, ...stopOfRoute[1].Stops];\n  stops.sort((first, second) => first.StopID - second.StopID);\n\n  /*  */\n  let newEstimatedTime = estimatedTime.filter(\n    (stop) => stop.RouteName.Zh_tw === routeName\n  );\n  newEstimatedTime.sort((first, second) => first.StopID - second.StopID);\n  stops.forEach((stop, index) => {\n    Object.assign(stop, newEstimatedTime[index]);\n  });\n\n  /*     */\n  const result = [[], []];\n  stops.forEach((stop) => {\n    // Direction  [0:'',1:'',2:'',255:'']\n    if (stop.Direction === 0 || stop.Direction === 1) {\n      result[stop.Direction].push(stop);\n    }\n  });\n\n  /*  */\n  result[0].sort((first, second) => first.StopSequence - second.StopSequence);\n  result[1].sort((first, second) => first.StopSequence - second.StopSequence);\n\n  /*     */\n  busNearStop.forEach((bus) => {\n    result[bus.Direction][bus.StopSequence - 1] = Object.assign(\n      result[bus.Direction][bus.StopSequence - 1],\n      bus\n    );\n  });\n\n  /* Geometry  GeoJson */\n  const wkt = new Wkt.Wkt();\n  wkt.read(shape[0].Geometry);\n  const newGeoJson = wkt\n    .toJson()\n    .coordinates.map((position) => position.reverse()); // \n  result.push(newGeoJson);\n\n  return result; // result: [[Direction: 0], [Direction: 1], GeoJson]\n};\n\n/*  Map\n *\n * PlateNumb \n * BusPosition \n * Speed \n * Direction \n */\n\n/*  API\n *\n * StationID \n * StationName \n * StationPosition \n * StationAddress \n * Stops \n * LocationCityCode \n */\nconst initNearby = {\n  $select: [\n    \"StationID\",\n    \"StationName\",\n    \"StationPosition\",\n    \"StationAddress\",\n    \"Stops\",\n    \"LocationCityCode\",\n  ],\n};\n\nexport const apiNearby = (data = null) =>\n  ajax(ROOT_URL + \"/Station/NearBy\", Object.assign(initNearby, data));\n\n/*  API\n *\n * RouteUID \n * RouteName \n * DepartureStopNameZh \n * DestinationStopNameZh \n */\n\nconst initStation = {\n  $select: [\n    \"RouteUID\",\n    \"RouteName\",\n    \"DepartureStopNameZh\",\n    \"DestinationStopNameZh\",\n  ],\n};\n\nexport const apiStation = (city = \"\", stationID) =>\n  city === \"\"\n    ? noCity\n    : ajax(\n        ROOT_URL + \"/Route/City/\" + city + \"/PassThrough/Station/\" + stationID,\n        initStation\n      );\n","import { useEffect, useState, useCallback } from \"react\";\n\nimport { apiCityBus, apiRouteName, apiNearby, apiStation } from \"../api\";\nimport { CITYBUS, ROUTENAME, NEARBY, STATION } from \"./type_config\";\n\nexport default function useHttp(\n  type = \"\",\n  location = \"\",\n  search_keyword = \"\",\n  control = true\n) {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState([]);\n\n  const updateData = useCallback(async () => {\n    try {\n      switch (type) {\n        case CITYBUS:\n          const cityBusData = await apiCityBus(location);\n          setData(cityBusData);\n          break;\n\n        case ROUTENAME:\n          const routeNameData = await apiRouteName(location, search_keyword);\n          setData(routeNameData);\n          break;\n\n        case NEARBY:\n          if (location === 'null, null') return\n          const newLocation = { $spatialFilter: [`nearby(${location}, 500)`] };\n          const nearbyData = await apiNearby(newLocation);\n          setData(nearbyData);\n          break;\n\n        case STATION:\n          const stationData = await apiStation(location, search_keyword)\n          setData(prevData => [prevData[0], stationData]);\n          break;\n\n        default:\n      }\n      setLoading(false);\n    } catch (error) {\n      setError(true);\n      setData(error);\n    }\n  }, [type, location, search_keyword]);\n\n  useEffect(() => {\n    setLoading(true);\n    setError(false);\n    const delay = setTimeout(() => {\n      updateData();\n    }, 0);\n    return () => {\n      clearTimeout(delay);\n    };\n  }, [updateData, control]);\n\n  return { data, error, loading };\n}\n","import { useContext } from \"react\";\n\nimport { Context } from \"../../pages/Layout\";\nimport Loading from \"../../components/Loading\";\nimport DataList from \"../../components/DataList\";\nimport { STATION } from \"../../utils/type_config\";\nimport useHttp from \"../../utils/useHttp\";\n\nexport default function StopRoute() {\n  const { city_En, search_keyword } = useContext(Context);\n  const searchArr = search_keyword.split(\"-\");\n  const { data, loading } = useHttp(STATION, city_En, searchArr[0]);\n\n  return (\n    <>\n      {loading ? (\n        <Loading />\n      ) : (\n        <DataList title={searchArr[1]} data={data[1]} page=\"nearby\" />\n      )}\n    </>\n  );\n}\n","import { useState, useRef, useEffect } from 'react';\nimport PropTypes from \"prop-types\";\nimport { Marker, Popup, Tooltip } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\nexport default function StopMarker({ stop, icon, className, isActive, map }) {\n  const { PositionLat, PositionLon } = stop.StopPosition;\n\n  const [refReady, setRefReady] = useState(false);\n  let popupRef = useRef(null);\n\n  useEffect(() => {\n    if (refReady && isActive) {\n      popupRef.openOn(map)\n    }\n  }, [refReady, isActive, map])\n  \n  return (\n    <Marker\n      key={stop.StopUID}\n      icon={icon}\n      position={[PositionLat, PositionLon]}\n    >\n      <Tooltip\n        offset={[0, 0]}\n        direction=\"center\"\n        opacity={1}\n        permanent\n        className={className}\n      >\n        {stop.StopSequence}\n      </Tooltip>\n      <Popup\n        ref={(r) => {\n          popupRef = r;\n          setRefReady(true);\n        }}\n      >\n        <div>\n          <h2>{stop.StopName.Zh_tw}</h2>\n          <span>\n            {stop?.A2EventType === 0\n              ? \"\"\n              : stop?.A2EventType === 1\n              ? \"\"\n              : stop.StopStatus === 0\n              ? stop.EstimateTime !== undefined &&\n                Math.floor(stop.EstimateTime / 60) !== 0\n                ? Math.floor(stop.EstimateTime / 60) + \" \"\n                : \"1 \"\n              : \"\"}\n          </span>\n        </div>\n      </Popup>\n    </Marker>\n  );\n}\n\nStopMarker.propTypes = {\n  stop: PropTypes.object,\n  icon: PropTypes.object,\n  className: PropTypes.string,\n};\n","import L from \"leaflet\";\n\nconst goStopMarker = new L.Icon({\n  iconUrl: require(\"../../asset/icon/stop.svg\").default,\n  iconRetinaUrl: require(\"../../asset/icon/stop.svg\").default,\n  iconAnchor: null,\n  popupAnchor: [0, 0],\n  shadowUrl: null,\n  shadowSize: null,\n  shadowAnchor: null,\n  iconSize: new L.Point(30, 30),\n  className: \"stopIcon goMarker\",\n});\nconst goBusNearStopMarker = new L.Icon({\n  iconUrl: require(\"../../asset/icon/busNearStop.svg\").default,\n  iconRetinaUrl: require(\"../../asset/icon/busNearStop.svg\").default,\n  iconAnchor: null,\n  popupAnchor: [0, 0],\n  shadowUrl: null,\n  shadowSize: null,\n  shadowAnchor: null,\n  iconSize: new L.Point(30, 30),\n  className: \"stopIcon goMarker\",\n});\nconst backStopMarker = new L.Icon({\n  iconUrl: require(\"../../asset/icon/stop.svg\").default,\n  iconRetinaUrl: require(\"../../asset/icon/stop.svg\").default,\n  iconAnchor: null,\n  popupAnchor: [0, 0],\n  shadowUrl: null,\n  shadowSize: null,\n  shadowAnchor: null,\n  iconSize: new L.Point(30, 30),\n  className: \"stopIcon backMarker\",\n});\nconst backBusNearStopMarker = new L.Icon({\n  iconUrl: require(\"../../asset/icon/busNearStop.svg\").default,\n  iconRetinaUrl: require(\"../../asset/icon/busNearStop.svg\").default,\n  iconAnchor: null,\n  popupAnchor: [0, 0],\n  shadowUrl: null,\n  shadowSize: null,\n  shadowAnchor: null,\n  iconSize: new L.Point(30, 30),\n  className: \"stopIcon backMarker\",\n});\nconst StationMarker = new L.Icon({\n  iconUrl: require(\"../../asset/icon/GPS.svg\").default,\n  iconRetinaUrl: require(\"../../asset/icon/GPS.svg\").default,\n  iconAnchor: null,\n  popupAnchor: [0, 0],\n  shadowUrl: null,\n  shadowSize: null,\n  shadowAnchor: null,\n  iconSize: new L.Point(30, 30),\n  className: \"\",\n});\nexport {\n  goStopMarker,\n  goBusNearStopMarker,\n  backStopMarker,\n  backBusNearStopMarker,\n  StationMarker,\n};\n","import PropTypes from 'prop-types';\n\nimport StopMarker from \"./StopMarker\";\nimport {\n  goStopMarker,\n  goBusNearStopMarker,\n  backStopMarker,\n  backBusNearStopMarker,\n} from \"./Icon\";\n\nexport default function StopMarkers({ stops, direction, map, activeIndex }) {\n  const busNearStopMarker =\n    direction === 0 ? goBusNearStopMarker : backBusNearStopMarker;\n  const stopMarker = direction === 0 ? goStopMarker : backStopMarker;\n  const className = direction === 0 ? \"goMarker\" : \"backMarker\";\n\n  return (\n    <>\n      {stops.map((stop, index) => {\n        return stop?.A2EventType === 1 ? (\n          <StopMarker\n            key={index}\n            stop={stop}\n            icon={busNearStopMarker}\n            className={className}\n            isActive={activeIndex === direction + '-' + index}\n            map={map}\n          />\n        ) : (\n          <StopMarker\n            key={index}\n            stop={stop}\n            icon={stopMarker}\n            className={className}\n            isActive={activeIndex === direction + '-' + index}\n            map={map}\n          />\n        );\n      })}\n    </>\n  );\n};\n\nStopMarkers.propTypes = {\n  stops: PropTypes.array, \n  direction: PropTypes.number,\n  activeIndex: PropTypes.string, \n  map: PropTypes.object \n}","import { useState, useRef, useEffect } from 'react';\nimport PropTypes from \"prop-types\";\nimport { Marker, Popup } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\nimport { StationMarker } from \"./Icon\";\n\nexport default function StopMarker({ station, isActive, map }) {\n\n  const { PositionLat, PositionLon } = station.StationPosition;\n  \n  const [refReady, setRefReady] = useState(false);\n  let popupRef = useRef(null);\n\n  useEffect(() => {\n    if (refReady && isActive) {\n      popupRef.openOn(map)\n    }\n  }, [refReady, isActive, map])\n\n  return (\n    <Marker\n      icon={StationMarker}\n      position={[PositionLat, PositionLon]}\n    >\n      <Popup\n        ref={(r) => {\n          popupRef = r;\n          setRefReady(true);\n        }}\n      >\n        <div>\n          <h2>{station.StationName.Zh_tw}</h2>\n          <h3>{station.StationAddress}</h3>\n          <p className=\"m-0\">\n            {station.Stops.map((item, index, arr) => {\n              const max = arr.length - 1\n              if (index !== max) {\n                return (item.RouteName.Zh_tw + ', ')\n              } else {\n                return (item.RouteName.Zh_tw)\n              }\n            })}\n          </p>\n        </div>\n      </Popup>\n    </Marker>\n  );\n}\n\nStopMarker.propTypes = {\n  station: PropTypes.object\n};\n","import PropTypes from \"prop-types\";\nimport \"leaflet/dist/leaflet.css\";\n\nimport StationMarker from \"./StationMarker\";\n\nexport default function StopMarker({ stations, activeIndex, map }) {\n  \n  return (\n    <>\n      {stations.map((station, index) => (\n        <StationMarker\n          key={index}\n          station={station}\n          isActive={activeIndex === index+''}\n          map={map}\n        />\n      ))}\n    </>\n  );\n}\n\nStopMarker.propTypes = {\n  stations: PropTypes.array,\n  activeIndex: PropTypes.string,\n  map: PropTypes.object,\n};\n","import { useEffect } from 'react';\nimport PropTypes from \"prop-types\";\nimport { MapContainer, TileLayer, Polyline } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\nimport StopMarkers from \"./StopMarkers\";\nimport StationMarkers from \"./StationMarkers\";\nimport \"./map.scss\";\n\nconst lineColor = {\n  color: \"#1CC8EE\",\n};\n\nexport default function Map({ data, index, center, map, setMap, zoom = 14, page }) {\n\n\n  useEffect(() => {\n    const delay = setTimeout(() => {\n      if (index !== 'noIndex') {\n        map.setView(center, zoom + 3);\n      } else {\n        map.setView(center, zoom);\n      }\n    }, 0)\n      return () => {\n        clearTimeout(delay)\n      }\n  }, [map, center, zoom, index])\n\n  return (\n    <MapContainer\n      center={center}\n      zoom={zoom}\n      whenCreated={setMap}\n      scrollWheelZoom={false}\n      className=\"mapContainer\"\n    >\n      <TileLayer\n        url={`https://api.mapbox.com/styles/v1/${process.env.REACT_APP_MAP_USERNAME}/${process.env.REACT_APP_MAP_STYLE_ID}/tiles/256/{z}/{x}/{y}@2x?access_token=${process.env.REACT_APP_MAP_TOKEN}`}\n        attribution='Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery &copy; <a href=\"https://www.mapbox.com/\">Mapbox</a>'\n      />\n      {page === \"route\" ? (\n        <>\n          <Polyline\n            pathOptions={lineColor}\n            className=\"lineShadow\"\n            positions={data[2]}\n          />\n          <StopMarkers stops={data[0]} direction={0} activeIndex={index} map={map} />\n          <StopMarkers stops={data[1]} direction={1} activeIndex={index} map={map} />\n        </>\n      ) : (\n        <StationMarkers stations={data} activeIndex={index} map={map} />\n      )}\n    </MapContainer>\n  );\n}\n\nMap.propTypes = {\n  data: PropTypes.array.isRequired,\n  page: PropTypes.string.isRequired,\n  zoom: PropTypes.number.isRequired,\n  center: PropTypes.array.isRequired,\n  setMap: PropTypes.func.isRequired,\n  index: PropTypes.string.isRequired,\n  map: PropTypes.object,\n};\n","import { useState, useEffect, useContext } from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport useGeolocation from \"react-hook-geolocation\";\nimport { Container } from \"react-bootstrap\";\n\nimport NearbyStops from \"./NearbyStops\";\nimport StopRoute from \"./StopRoute\";\nimport Loading from \"../../components/Loading\";\nimport Map from \"../../components/Map\";\nimport { NEARBY } from \"../../utils/type_config\";\nimport { Context } from \"../Layout\";\nimport useHttp from \"../../utils/useHttp\";\n\nexport default function Nearby() {\n  const { showMap } = useContext(Context);\n  const { latitude, longitude } = useGeolocation();\n  const location = latitude + \", \" + longitude;\n  const { data, loading } = useHttp(NEARBY, location);\n\n  const [map, setMap] = useState(null);\n  const zoom = 17;\n  const handleMap = (e) => {\n    setMap(e);\n  };\n  const [index, setIndex] = useState('noIndex');\n  const handleIndex = (e) => {\n    setIndex(e)\n  }\n\n  const [center, setCenter] = useState([latitude, longitude])\n\n  useEffect(() => {\n    setCenter([latitude, longitude])\n  }, [latitude, longitude , setCenter])\n\n  return (\n    <main className=\"main\">\n      <Container className={`pb-7 position-fixed bottom-0 tableAndMap bg-dark ${showMap ? 'showMap' : ''}`}>\n        <Routes>\n          <Route\n            index\n            element={\n              <NearbyStops\n                data={data}\n                setIndex={handleIndex}\n                setCenter={setCenter}\n                loading={loading}\n              />\n            }\n          />\n          <Route path=\":id\" element={<StopRoute />} />\n        </Routes>\n      </Container>\n      {loading ? (\n        <Loading />\n      ) : center[0] === null ? <span>...</span> : (\n        <Map\n          data={data}\n          index={index}\n          center={center}\n          map={map}\n          setMap={handleMap}\n          zoom={zoom}\n          page=\"nearby\"\n        />\n      )}\n    </main>\n  );\n}\n","import PropTypes from \"prop-types\";\n\nimport { ReactComponent as GPS } from \"../../asset/icon/GPS.svg\";\nimport { keyboard_base } from \"../../utils/keyboard_config\";\n\nexport default function KeyboardBase({ city }) {\n  return (\n    <div className=\"keyboard bg-gray p-6\">\n      <label\n        htmlFor=\"cityKeyboard\"\n        className=\"btn btn-light city-btn\"\n        aria-label=\"\"\n      >\n        <GPS className=\"me-1\" /> {city || \"\"}\n      </label>\n\n      <label\n        htmlFor=\"search\"\n        className=\"btn btn-primary manual-btn\"\n        aria-label=\"\"\n      >\n        \n      </label>\n\n      {keyboard_base.map((item) =>\n        item !== \"\" ? (\n          <button\n            key={item}\n            type=\"button\"\n            className={`btn ${\n              item === \"\"\n                ? \"delete-icon p-1\"\n                : Number.isInteger(item)\n                ? \"btn-light\"\n                : \"btn-primary\"\n            }`}\n            aria-label={item}\n            data-route={item}\n          >\n            {item === \"\" ? null : item}\n          </button>\n        ) : (\n          <label\n            key={item}\n            htmlFor=\"moreKeyboard\"\n            className=\"btn btn-primary\"\n            aria-label={item}\n          >\n            {item}\n          </label>\n        )\n      )}\n    </div>\n  );\n}\n\nKeyboardBase.propTypes = {\n  city: PropTypes.string,\n};\n","import { useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { keyboard_city } from \"../../utils/keyboard_config\";\n\nexport default function KeyboardCity({ city, setCity }) {\n  const [enterCity, setEnterCity] = useState(city || \"\");\n  const handleEnterCity = (e) => {\n    const { city, savecity, node } = e.target.dataset;\n    switch (node) {\n      case \"setCity\":\n        console.log(city);\n        setEnterCity(city);\n        break;\n      case \"saveCity\":\n        console.log(savecity);\n        setCity(savecity);\n        break;\n      default:\n    }\n  };\n  return (\n    <div className=\"keyboard bg-gray p-6\" onClick={handleEnterCity}>\n      {keyboard_city.map((item) => (\n        <button\n          key={item.City}\n          type=\"button\"\n          className={`btn btn-primary fs-3 p-0 ${\n            enterCity === item.CityName ? \"active\" : \"\"\n          }`}\n          aria-label={item.CityName + \" \" + item.City}\n          data-city={item.CityName}\n          data-node=\"setCity\"\n        >\n          {item.CityName}\n        </button>\n      ))}\n      <label\n        htmlFor=\"baseKeyboard\"\n        className=\"btn btn-primary fs-3 enter-btn\"\n        aria-label=\"\"\n        data-savecity={enterCity}\n        data-node=\"saveCity\"\n      >\n        \n      </label>\n    </div>\n  );\n}\n\nKeyboardCity.propTypes = {\n  setCity: PropTypes.func.isRequired,\n  city: PropTypes.string,\n};\n","import { keyboard_more } from \"../../utils/keyboard_config\";\n\nexport default function KeyboardMore() {\n  return (\n    <div className=\"keyboard bg-gray p-6\">\n      {keyboard_more.map((item) => (\n        <button\n          key={item}\n          type=\"button\"\n          className=\"btn btn-primary fs-3 p-0\"\n          aria-label={item}\n          data-route={item}\n        >\n          {item}\n        </button>\n      ))}\n      <label\n        htmlFor=\"baseKeyboard\"\n        className=\"btn btn-primary fs-3 goBack-btn\"\n        aria-label=\"\"\n      >\n        \n      </label>\n    </div>\n  );\n}\n","import { useContext, useRef } from \"react\";\nimport PubSub from \"pubsub-js\";\n\nimport { Context } from \"../../pages/Layout\";\nimport KeyboardBase from \"./KeyboardBase\";\nimport KeyboardCity from \"./KeyboardCity\";\nimport KeyboardMore from \"./KeyboardMore\";\nimport \"./keyboard.scss\";\n\n/* input radio  */\nconst inputRadio = {\n  type: \"radio\",\n  className: \"d-none\",\n  name: \"keyboard\",\n};\n\nexport default function Keyboard() {\n  const { city, setCity } = useContext(Context);\n  const audio = useRef(null);\n  const pressBtn = (e) => {\n    const { route } = e.target.dataset;\n    audio.current.currentTime = 0;\n    audio.current.play();\n    PubSub.publish(\"search\", route || \"\");\n  };\n\n  return (\n    <div className=\"keyboard-frame position-relative\" onClick={pressBtn}>\n\n      <input {...inputRadio} id=\"moreKeyboard\" />\n      <KeyboardMore />\n\n      <input {...inputRadio} id=\"cityKeyboard\" defaultChecked={!city} />\n      <KeyboardCity city={city} setCity={setCity} />\n\n      <input {...inputRadio} id=\"baseKeyboard\" defaultChecked={city} />\n      <KeyboardBase city={city} />\n\n      <label\n        htmlFor=\"baseKeyboard\"\n        className=\"position-absolute bottom-0 end-0 text-primary bg-gray me-2 rounded keyboard-show-btn\"\n        aria-label=\" Keyboard\"\n      >\n        <img\n          src={require(\"../../asset/icon/keyboard.svg\").default}\n          className=\"px-4 py-2\"\n          alt=\" Keyboard\"\n        />\n      </label>\n      <audio ref={audio}>\n        <source\n          src={require(\"../../asset/Bus.mp3\").default}\n          type=\"audio/mpeg\"\n        />\n      </audio>\n    </div>\n  );\n}\n","import React, { useRef, useContext } from \"react\";\nimport { Container } from \"react-bootstrap\";\n\nimport Keyboard from \"../Keyboard\";\nimport DataList from \"../DataList\";\nimport Loading from \"../Loading\";\nimport { Context } from \"../../pages/Layout\";\nimport { CITYBUS } from \"../../utils/type_config\";\nimport useHttp from \"../../utils/useHttp\";\n\nexport default function SearchResult() {\n  /*  */\n  const noKeyboard = useRef(null);\n  const noShow = () => {\n    noKeyboard.current.checked = true;\n  };\n\n  const { city, city_En, keyword } = useContext(Context);\n\n  const { data, loading } = useHttp(CITYBUS, city_En);\n\n  /*  */\n  const filterData =\n    data[0] === 0\n      ? []\n      : data.filter((item) => item?.RouteName.Zh_tw.indexOf(keyword) !== -1);\n  let showData = filterData;\n  /*  50  */\n  showData.length = 50;\n\n  return (\n    <>\n      <Container className=\"content\">\n        {keyword.trim() === \"\" ? (\n          <>\n            <h2 className=\"fs-2 pt-7 mb-1\">{city || \"\"}</h2>\n            <div className=\"fs-3\"></div>\n          </>\n        ) : loading ? (\n          <Loading />\n        ) : (\n          <DataList setShow={noShow} title={city} data={showData} />\n        )}\n      </Container>\n      <input\n        type=\"radio\"\n        className=\"d-none\"\n        name=\"keyboard\"\n        id=\"noKeyboard\"\n        ref={noKeyboard}\n      />\n      <Keyboard />\n    </>\n  );\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function Timer({ control, setControl }) {\n  const CD = 30; /*  */\n  const [count, setCount] = useState(CD)\n\n  const toggleControl = useCallback(() => {\n    setControl(!control);\n  }, [control, setControl])\n  useEffect(() => {\n    const timer = setInterval(() => {\n      if (count !== 0) {\n        setCount((count) => count - 1);\n      } else {\n        toggleControl();\n        setCount(CD);\n      }\n    }, 1000)\n    return () => {\n      clearInterval(timer)\n    }\n  }, [count, setCount, toggleControl])\n  return (<span className=\"fs-4 text-primary\"> {count} </span>)\n}\n\nTimer.propTypes = {\n  setControl: PropTypes.func.isRequired,\n  control: PropTypes.bool.isRequired,\n}","import React, { useCallback, useContext } from \"react\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport PropTypes from \"prop-types\";\n\nimport Timer from './Timer';\nimport { Context } from \"../../pages/Layout\";\nimport \"./routeTable.scss\";\n\nconst StopsTable = ({ stops, direction }) => {\n  return (\n    <>\n      {stops.map((stop, index) => {\n        const { PositionLat, PositionLon } = stop.StopPosition;\n        return (\n          <Row\n            as=\"li\"\n            key={stop.StopUID}\n            className={`gx-3 align-items-center py-1 ${\n              stop?.A2EventType === 0\n                ? \"leaving\"\n                : stop?.A2EventType === 1\n                ? \"enter\"\n                : stop.StopStatus === 0\n                ? \"waiting\"\n                : \"\"\n            }`}\n            data-centerstr={PositionLat + \"-\" + PositionLon}\n            data-index={direction + \"-\" + index}\n          >\n            <Col\n              xs={3}\n              data-centerstr={PositionLat + \"-\" + PositionLon}\n              data-index={direction + \"-\" + index}\n            >\n              <div className=\"event text-center fs-3\">\n                {stop?.A2EventType === 0\n                  ? \"\"\n                  : stop?.A2EventType === 1\n                  ? \"\"\n                  : stop.StopStatus === 0\n                  ? stop.EstimateTime !== undefined &&\n                    Math.floor(stop.EstimateTime / 60) !== 0\n                    ? Math.floor(stop.EstimateTime / 60) + \" \"\n                    : \"1 \"\n                  : \"\"}\n              </div>\n            </Col>\n            <Col\n              xs={5}\n              data-centerstr={PositionLat + \"-\" + PositionLon}\n              data-index={direction + \"-\" + index}\n            >\n              <h3 className=\"stop fs-3\">{stop.StopName.Zh_tw}</h3>\n            </Col>\n            <Col\n              xs={3}\n              data-centerstr={PositionLat + \"-\" + PositionLon}\n              data-index={direction + \"-\" + index}\n            >\n              <div className=\"text-end fs-3 text-primary\">\n                {stop?.PlateNumb || null}\n              </div>\n            </Col>\n            <Col\n              xs={1}\n              data-centerstr={PositionLat + \"-\" + PositionLon}\n              data-index={direction + \"-\" + index}\n            >\n              <div className=\"circle fs-4 text-center lh-sm\">\n                {stop.StopSequence}\n              </div>\n            </Col>\n          </Row>\n        );\n      })}\n    </>\n  );\n};\n\nexport default function RouteTable({ data, setIndex, setCenter, setControl, control }) {\n  const { isBack, search_keyword, showMap, setShowMap } = useContext(Context);\n\n  /*  */\n  const onClick = useCallback(\n    (e) => {\n      const centerstr =\n        e.target.parentNode.dataset.centerstr || e.target.dataset.centerstr;\n      const index = e.target.parentNode.dataset.index || e.target.dataset.index;\n      if (centerstr) {\n        const center = centerstr.split(\"-\");\n        setShowMap(true);\n        setCenter(center);\n        setIndex(index);\n      }\n    },\n    [setShowMap, setCenter, setIndex]\n  );\n  return (\n    <Container\n      fluid\n      className={`position-fixed bottom-0 tableAndMap bg-gray ${\n        showMap ? \"showMap\" : \"\"\n      }`}\n    >\n      <div className=\"d-flex justify-content-between pt-5 pb-2\">\n        <h2 className=\"fs-1 text-primary\">{search_keyword}</h2>\n        <Timer setControl={setControl} control={control} />\n      </div>\n      <div\n        className={`routeList d-flex overflow-hidden${isBack ? \" isBack\" : \"\"}`}\n        onClick={onClick}\n      >\n        <ul className=\"flex-shrink-0 pt-1 pb-3\">\n          <StopsTable stops={data[0]} direction={0} />\n        </ul>\n        <ul className=\"flex-shrink-0 pt-1 pb-3\">\n          <StopsTable stops={data[1]} direction={1} />\n        </ul>\n      </div>\n    </Container>\n  );\n}\n\nStopsTable.propTypes = {\n  stops: PropTypes.array,\n  direction: PropTypes.number,\n};\n\nRouteTable.propType = {\n  data: PropTypes.array.isRequired,\n  setIndex: PropTypes.func.isRequired,\n  setCenter: PropTypes.func.isRequired,\n  setControl: PropTypes.func.isRequired,\n  control: PropTypes.bool.isRequired,\n};\n","import React, { useState, useEffect, useContext } from \"react\";\n\nimport { Context } from \"../../pages/Layout\";\nimport { ROUTENAME } from \"../../utils/type_config\";\nimport useHttp from \"../../utils/useHttp\";\nimport Loading from \"../Loading\";\nimport RouteTable from \"../RouteTable\";\nimport Map from \"../Map\";\n\nexport default function RoutePage() {\n  const { city_En, isBack, search_keyword } = useContext(Context);\n  const [control, setControl] = useState(true);\n  const handleControl = (e) => {\n    setControl(e)\n  }\n\n  const { data, error } = useHttp(ROUTENAME, city_En, search_keyword, control);\n\n  const [map, setMap] = useState(null);\n  const zoom = 14;\n  const handleMap = (e) => {\n    setMap(e);\n  };\n  const [index, setIndex] = useState(\"noIndex\");\n  const handleIndex = (e) => {\n    setIndex(e);\n  };\n\n  /*  */\n  let latitude = 0;\n  let longitude = 0;\n  const stopsArr = data[0] || [];\n  stopsArr.forEach((stop) => {\n    latitude += stop.StopPosition.PositionLat;\n    longitude += stop.StopPosition.PositionLon;\n  });\n  const stopsArrLen = stopsArr.length === 0 ? 1 : stopsArr.length;\n  latitude = latitude / stopsArrLen;\n  longitude = longitude / stopsArrLen;\n\n  const [center, setCenter] = useState([latitude, longitude]);\n  const handleCenter = (e) => {\n    setCenter(e);\n  };\n\n  useEffect(() => {\n    setCenter([latitude, longitude])\n  }, [latitude, longitude , setCenter])\n\n  return (\n    <div className={isBack ? \"backMarkerShow\" : \"goMarkerShow\"}>\n      {data.length === 0 ? (\n        <Loading />\n      ) : data[0] === 0 || error ? (\n        <div></div>\n      ) : (\n        <>\n          {map ? (\n            <RouteTable\n              data={data}\n              setIndex={handleIndex}\n              setCenter={handleCenter}\n              setControl={handleControl}\n              control={control}\n            />\n          ) : null}\n          <Map\n            data={data}\n            index={index}\n            center={center}\n            map={map}\n            setMap={handleMap}\n            zoom={zoom}\n            page=\"route\"\n          />\n        </>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { HashRouter, Routes, Route, Navigate } from \"react-router-dom\";\n\nimport { Layout } from \"./pages/Layout\";\nimport Index from \"./pages/Index\";\nimport CityBus from \"./pages/CityBus\";\nimport Favorites from \"./pages/Favorites\";\nimport Nearby from \"./pages/Nearby\";\nimport SearchResult from \"./components/SearchResult\";\nimport RoutePage from \"./components/RoutePage\";\nimport \"./asset/scss/style.scss\";\n\nexport default function App() {\n  return (\n    <HashRouter>\n      <Routes>\n        <Route element={<Layout />}>\n          <Route index element={<Index />} />\n          <Route path=\"citybus\" element={<CityBus />}>\n            <Route index element={<SearchResult />} />\n            <Route path=\":id\" element={<RoutePage />} />\n          </Route>\n          <Route path=\"nearby/*\" element={<Nearby />} />\n          <Route path=\"favorites\" element={<Favorites />} />\n          <Route path=\"/*\" element={<Navigate replace to=\"/\" />} />\n        </Route>\n      </Routes>\n    </HashRouter>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","export default __webpack_public_path__ + \"static/media/stop.9486e491.svg\";","export default __webpack_public_path__ + \"static/media/busNearStop.d070c4ff.svg\";","export default __webpack_public_path__ + \"static/media/GPS.e4f566a1.svg\";","export default __webpack_public_path__ + \"static/media/like_btn.71133b27.svg\";","export default __webpack_public_path__ + \"static/media/like_fill.14169483.svg\";","export default __webpack_public_path__ + \"static/media/like.dc7292e2.svg\";"],"sourceRoot":""}